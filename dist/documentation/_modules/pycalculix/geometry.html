
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>pycalculix.geometry &#8212; pycalculix 1.1.4 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for pycalculix.geometry</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;This module stores geometry classes, which are used to make parts.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">atan2</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">radians</span><span class="p">,</span> <span class="n">degrees</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Arc</span> <span class="k">as</span> <span class="n">AArc</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">PathPatch</span>
<span class="kn">from</span> <span class="nn">matplotlib.path</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">det</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">solve</span> <span class="k">as</span> <span class="n">linsolve</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">base_classes</span>

<span class="c1">#accuracy for small numbers in math below</span>
<span class="n">ACC</span> <span class="o">=</span> <span class="o">.</span><span class="mi">00001</span> <span class="c1"># original</span>

<span class="n">LDIVS</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="get_text_hv"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.get_text_hv">[docs]</a><span class="k">def</span> <span class="nf">get_text_hv</span><span class="p">(</span><span class="n">angle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns (ha, va) text horizontal and vertical alignment for line label.</span>

<span class="sd">    This makes the line label text inside its area, assuming areas closed CW.</span>

<span class="sd">    Args:</span>
<span class="sd">        angle (float): line normal vector in degrees, between 180 and -180</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">horiz</span><span class="p">,</span> <span class="n">vert</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">67.5</span><span class="p">:</span>
        <span class="n">horiz</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span>
    <span class="k">elif</span> <span class="mf">67.5</span> <span class="o">&lt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">112.5</span><span class="p">:</span>
        <span class="n">horiz</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span>
    <span class="k">elif</span> <span class="mf">112.5</span> <span class="o">&lt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
        <span class="n">horiz</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">22.5</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">157.5</span><span class="p">:</span>
        <span class="n">vert</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">vert</span> <span class="o">=</span> <span class="s1">&#39;top&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vert</span> <span class="o">=</span> <span class="s1">&#39;bottom&#39;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">horiz</span><span class="p">,</span> <span class="n">vert</span><span class="p">)</span></div>


<div class="viewcode-block" id="Point"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point">[docs]</a><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes a point or vector.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (float): vertical coordinate of point</span>
<span class="sd">        y (float): horizontal coordinate of point</span>
<span class="sd">        z (float): in-page coordinate of point, defaults to zero</span>

<span class="sd">    Attributes:</span>
<span class="sd">        x (float): vertical coordinate of point</span>
<span class="sd">        y (float): horizontal coordinate of point</span>
<span class="sd">        z (float): in-page coordinate of point, defaults to zero</span>
<span class="sd">            nodes (Node): a list of nodes in a mesh at this point.</span>
<span class="sd">            List length is 1.</span>
<span class="sd">        nodes (list): list of nodes under point</span>
<span class="sd">        lines (set): set of lines which use this point</span>
<span class="sd">        arc_center (bool): True if this point is an arc center</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arc_center</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_part</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">esize</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Point.get_name"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns item name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;P&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks x and y equality to other point.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Point): passed point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self + other.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Point): passed point</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point = self + other (new point, does not modify self)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self - other.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Point): passed point</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point = self - other (new point, does not modify self)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the hash of the item to the id number.</span>

<span class="sd">        This allows one to make sets of these items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self*factor.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor (float): factor to multiply the Point by</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point = self*factor (new point, does not modify self)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">*</span><span class="n">factor</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns new point = self/other.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (float or Point): item we&#39;re dividing by</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point or factor. Does not modify self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">/</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">/</span><span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">/</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">/</span><span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">factor</span>

<div class="viewcode-block" id="Point.set_line"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.set_line">[docs]</a>    <span class="k">def</span> <span class="nf">set_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the line or arc in the point.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">line</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arc_center</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">Line</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">arc_center</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span></div>

<div class="viewcode-block" id="Point.unset_line"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.unset_line">[docs]</a>    <span class="k">def</span> <span class="nf">unset_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the line or arc in the point.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">line</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.length"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of this point or vector.&quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Point.label"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.label">[docs]</a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Labels the point on a Matplotlib axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            axis (Matplotlib Axis): Matplotlib Axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span></div>

<div class="viewcode-block" id="Point.plot"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots the point on the passed matplotlib axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            axis (Matplotlib axis): plate to plot the point</span>
<span class="sd">            pnum (bool): True turns on point labeling</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.make_unit"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.make_unit">[docs]</a>    <span class="k">def</span> <span class="nf">make_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modifies self vector to make it a unit vector.&quot;&quot;&quot;</span>
        <span class="n">lenval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="n">lenval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="n">lenval</span></div>

<div class="viewcode-block" id="Point.ang_rad"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.ang_rad">[docs]</a>    <span class="k">def</span> <span class="nf">ang_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle in radians, assume point is vector from 0,0.&quot;&quot;&quot;</span>
        <span class="n">vert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">horiz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">rad_angle</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">vert</span><span class="p">,</span> <span class="n">horiz</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rad_angle</span></div>

<div class="viewcode-block" id="Point.ang_deg"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.ang_deg">[docs]</a>    <span class="k">def</span> <span class="nf">ang_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle in degrees, assume point is vector from 0,0.&quot;&quot;&quot;</span>
        <span class="n">rad_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ang_rad</span><span class="p">()</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">rad_angle</span> <span class="o">*</span> <span class="mf">180.0</span> <span class="o">/</span> <span class="n">pi</span>
        <span class="k">return</span> <span class="n">deg</span></div>

<div class="viewcode-block" id="Point.axrad"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.axrad">[docs]</a>    <span class="k">def</span> <span class="nf">axrad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a tuple of (ax, rad) for plotting.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.radax"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.radax">[docs]</a>    <span class="k">def</span> <span class="nf">radax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a tuple of (rad, ax) for checking if inside.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Point.rot_ccw_deg"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.rot_ccw_deg">[docs]</a>    <span class="k">def</span> <span class="nf">rot_ccw_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ang</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rotates the current vector by ccw degrees about 0,0. Returns self.</span>

<span class="sd">        Args:</span>
<span class="sd">            ang (float): angle or rotation in degrees, counter-clockwise (ccw)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">radians</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">axial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">axial</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">axial</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">rad</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">rad</span><span class="p">,</span> <span class="n">axial</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Point.ang_bet_rad"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.ang_bet_rad">[docs]</a>    <span class="k">def</span> <span class="nf">ang_bet_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle between self and other vector in radians.</span>

<span class="sd">        Assumes vectors start at 0,0</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Point): passed vector</span>

<span class="sd">        Returns:</span>
<span class="sd">            angle (float): radians between self vector and other vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">avect</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">avect</span><span class="o">.</span><span class="n">ang_rad</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ang</span></div>

<div class="viewcode-block" id="Point.ang_bet_deg"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.ang_bet_deg">[docs]</a>    <span class="k">def</span> <span class="nf">ang_bet_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns angle between self and other vector in degrees.</span>

<span class="sd">        Assumes vectors start at 0,0</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Point): passed vector</span>

<span class="sd">        Returns:</span>
<span class="sd">            angle (float): degrees between self vector and other vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">avect</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">avect</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ang</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns string listing object type, id number, and coordinates&quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s1">&#39;Point </span><span class="si">%s</span><span class="s1">, (x, y)=(</span><span class="si">%.3f</span><span class="s1">, </span><span class="si">%.3f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span>

<div class="viewcode-block" id="Point.set_esize"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Point.set_esize">[docs]</a>    <span class="k">def</span> <span class="nf">set_esize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">esize</span> <span class="o">=</span> <span class="n">size</span></div></div>



<div class="viewcode-block" id="Line"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line">[docs]</a><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Stores a line from points start_pt to end_pt.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_pt (Point): first point</span>
<span class="sd">        end_pt (Point): second point</span>

<span class="sd">    Attributes:</span>
<span class="sd">        points (list of Point) : list of the line&#39;s points [start_pt, end_pt]</span>
<span class="sd">        ediv (None or float): number of elements on the line</span>
<span class="sd">        midpt (Point): a mid-point between start_pt and end_pt</span>
<span class="sd">        nodes (list of Node): a list of meshed nodes on the line</span>
<span class="sd">        edge (bool): True if line is a non-shared edge in an area</span>
<span class="sd">        signlines (list): list of SignLine that use this Line</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_pt</span><span class="p">,</span> <span class="n">end_pt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">start_pt</span><span class="p">,</span> <span class="n">end_pt</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ediv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Line.reverse"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses self.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all line defining points.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">areas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all areas that signlines use.&quot;&quot;&quot;</span>
        <span class="n">areas</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
            <span class="n">areas</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sline</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">areas</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bool telling if self == other.</span>

<span class="sd">        Returns True if the lines are the same type, and contain the same</span>
<span class="sd">        list of points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="n">mypts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span>
            <span class="n">otherpts</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">points</span>
            <span class="n">same</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">mypt</span><span class="p">,</span> <span class="n">otherpt</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">mypts</span><span class="p">,</span> <span class="n">otherpts</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">mypt</span> <span class="o">!=</span> <span class="n">otherpt</span><span class="p">:</span>
                    <span class="n">same</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">return</span> <span class="n">same</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the hash of the item to the id number.</span>

<span class="sd">        This allows one to make sets of these items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

<div class="viewcode-block" id="Line.add_signline"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.add_signline">[docs]</a>    <span class="k">def</span> <span class="nf">add_signline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signline</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a signline to self.signlines.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">signline</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signline</span><span class="p">)</span></div>

<div class="viewcode-block" id="Line.get_name"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the line name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Line.length"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of the line.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">length</span><span class="p">()</span></div>

<div class="viewcode-block" id="Line.save_to_points"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.save_to_points">[docs]</a>    <span class="k">def</span> <span class="nf">save_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This stores this line in the line&#39;s child points.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allpoints</span><span class="p">:</span>
            <span class="n">point</span><span class="o">.</span><span class="n">set_line</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Line.set_ediv"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.set_ediv">[docs]</a>    <span class="k">def</span> <span class="nf">set_ediv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ediv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the number of element divisions on the line when meshing.</span>

<span class="sd">        Args:</span>
<span class="sd">            ediv (int): number of required elements on this line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ediv</span> <span class="o">=</span> <span class="n">ediv</span></div>

<div class="viewcode-block" id="Line.set_esize"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.set_esize">[docs]</a>    <span class="k">def</span> <span class="nf">set_esize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esize</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the size of mesh elements on the line when meshing.</span>

<span class="sd">        Args:</span>
<span class="sd">            esize (float): size of mesh elements on this line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">set_esize</span><span class="p">(</span><span class="n">esize</span><span class="p">)</span></div>

<div class="viewcode-block" id="Line.signed_copy"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.signed_copy">[docs]</a>    <span class="k">def</span> <span class="nf">signed_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a SignLine copy of this Line with the passed sign.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SignLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">)</span></div>

<div class="viewcode-block" id="Line.pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.pt">[docs]</a>    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the start or end point of the line.</span>

<span class="sd">        Args:</span>
<span class="sd">            ind (int): index of the point we want, 0=start, 1=end</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point: requested Point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span></div>

<div class="viewcode-block" id="Line.set_pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.set_pt">[docs]</a>    <span class="k">def</span> <span class="nf">set_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the line&#39;s point at ind to the new point.</span>

<span class="sd">        Args:</span>
<span class="sd">            ind (int): index of the point we&#39;re updating, 0=start, 1=end</span>
<span class="sd">            point (Point): new point we are assigning to Line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># remove this line from the old point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># update the point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_to_points</span><span class="p">()</span>
        <span class="n">other_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="ow">not</span> <span class="n">ind</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">point</span> <span class="o">==</span> <span class="n">other_point</span><span class="p">:</span>
            <span class="c1"># we are making a zero length line</span>
            <span class="n">other_point</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">area</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lineloop</span><span class="o">.</span><span class="n">parent</span>
                    <span class="n">area</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">fea</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
                <span class="n">sline</span><span class="o">.</span><span class="n">lineloop</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span></div>

<div class="viewcode-block" id="Line.mid"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.mid">[docs]</a>    <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates and returns a midpoint between start and end points.&quot;&quot;&quot;</span>
        <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="mf">0.5</span>
        <span class="k">return</span> <span class="n">point</span></div>

<div class="viewcode-block" id="Line.touches"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.touches">[docs]</a>    <span class="k">def</span> <span class="nf">touches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if a line is connected to a passed line.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Line or Arc): passed other line</span>

<span class="sd">        Returns:</span>
<span class="sd">            True: beginning or end point connect to other line</span>
<span class="sd">            False: lines are not connected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">[</span><span class="n">start_pt</span><span class="p">,</span> <span class="n">end_pt</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">start_pt</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">points</span> <span class="ow">or</span> <span class="n">end_pt</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Line.offset"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.offset">[docs]</a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a new line offset from the dirrent line by value dist.</span>

<span class="sd">        Right hand rule is followed assuming x is the origina line.</span>
<span class="sd">        Z points out of page.</span>
<span class="sd">        Y is the direction of line offset.</span>

<span class="sd">        Args:</span>
<span class="sd">            dist (float): distance to offset the new line by</span>

<span class="sd">        Returns:</span>
<span class="sd">            tmpline (Line): new Line which is offset from self by dist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_perp_vec</span><span class="p">()</span>
        <span class="n">lvect</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
        <span class="c1"># scale it by the new amount</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="n">lvect</span><span class="o">*</span><span class="n">dist</span>
        <span class="c1"># add the vector onto the defining points</span>
        <span class="n">start_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">lvect</span>
        <span class="n">end_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">lvect</span>
        <span class="n">tmpline</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">start_pt</span><span class="p">,</span> <span class="n">end_pt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tmpline</span></div>

<div class="viewcode-block" id="Line.get_abc"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.get_abc">[docs]</a>    <span class="k">def</span> <span class="nf">get_abc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of abc terms for a line definition.</span>

<span class="sd">        ax + by + c = 0</span>

<span class="sd">        Returns:</span>
<span class="sd">            [a, b, c]: list of the above line terms</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">dx_</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy_</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">y</span>
        <span class="p">(</span><span class="n">a__</span><span class="p">,</span> <span class="n">b__</span><span class="p">,</span> <span class="n">c__</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dy_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># vertical radial line</span>
            <span class="c1"># y = 5 --&gt; 0 = -y + 5 --&gt; 0 = 0x -y + 5</span>
            <span class="p">(</span><span class="n">b__</span><span class="p">,</span> <span class="n">c__</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">dx_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># horizontal axial line</span>
            <span class="c1"># x = 5 --&gt; 0 = -x + 5 --&gt; 0 = -x +0y + 5</span>
            <span class="p">(</span><span class="n">a__</span><span class="p">,</span> <span class="n">c__</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># y = ax + c --&gt; 0 = ax - y + c</span>
            <span class="n">slope</span> <span class="o">=</span> <span class="n">dy_</span><span class="o">/</span><span class="n">dx_</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">slope</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">x</span>
            <span class="p">(</span><span class="n">a__</span><span class="p">,</span> <span class="n">b__</span><span class="p">,</span> <span class="n">c__</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">slope</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">a__</span><span class="p">,</span> <span class="n">b__</span><span class="p">,</span> <span class="n">c__</span><span class="p">]</span></div>

<div class="viewcode-block" id="Line.get_perp_vec"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.get_perp_vec">[docs]</a>    <span class="k">def</span> <span class="nf">get_perp_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns vector perpendicular to current line.</span>

<span class="sd">        Vector is created by rotating the current line ccw 90 degrees</span>
<span class="sd">        around the start point.</span>

<span class="sd">        Args:</span>
<span class="sd">            point (Point): defaults to None, unused for Line, used for Arc</span>

<span class="sd">        Returns:</span>
<span class="sd">            lvect (Point): vector that is perpendiculat to the current line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">lvect</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lvect</span></div>

<div class="viewcode-block" id="Line.get_tan_vec"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.get_tan_vec">[docs]</a>    <span class="k">def</span> <span class="nf">get_tan_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns vector tangent to the current line.</span>

<span class="sd">        Vector points from the passed point to a unit location further away.</span>

<span class="sd">        Args:</span>
<span class="sd">            point (Point): start point</span>

<span class="sd">        Returns:</span>
<span class="sd">            lvect (Point): vector that is tangent to the current line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">point</span> <span class="o">==</span> <span class="n">end</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">point</span>
        <span class="n">lvect</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">lvect</span></div>

<div class="viewcode-block" id="Line.arc_tang_intersection"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.arc_tang_intersection">[docs]</a>    <span class="k">def</span> <span class="nf">arc_tang_intersection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">mag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an intersection point on this line of an arc at center point</span>

<span class="sd">        Args:</span>
<span class="sd">            point (Point): arc center point</span>
<span class="sd">            mag (float): passed radius distance from the arc center to the line</span>

<span class="sd">        Returns:</span>
<span class="sd">            newpt (Point or None):</span>
<span class="sd">                Point: the intersection point</span>
<span class="sd">                None: returns None if no intersection point exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_perp_vec</span><span class="p">()</span>
        <span class="n">vect</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
        <span class="n">pt2</span> <span class="o">=</span> <span class="n">point</span> <span class="o">+</span> <span class="n">vect</span><span class="o">*</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">mag</span><span class="p">)</span>

        <span class="n">tmpline</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">pt2</span><span class="p">)</span>
        <span class="n">newpt</span> <span class="o">=</span> <span class="n">tmpline</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">newpt</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Intersection failed!&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newpt</span></div>

<div class="viewcode-block" id="Line.coincident"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.coincident">[docs]</a>    <span class="k">def</span> <span class="nf">coincident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks to see if point is on the line.</span>

<span class="sd">        Args:</span>
<span class="sd">            point (Point): input point to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if point on line or False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check if point is almost equal to end points</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">point</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">point</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dist</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># check if point is on the lines</span>
        <span class="p">[</span><span class="n">a__</span><span class="p">,</span> <span class="n">b__</span><span class="p">,</span> <span class="n">c__</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_abc</span><span class="p">()</span>
        <span class="n">remainder</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a__</span><span class="o">*</span><span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">b__</span><span class="o">*</span><span class="n">point</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">c__</span><span class="p">)</span>
        <span class="c1"># print(&#39;  coincident: %s %s&#39; % (self.get_name(), point))</span>
        <span class="c1"># print(&#39;  remainder: %.6f&#39; % remainder)</span>
        <span class="k">if</span> <span class="n">remainder</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
            <span class="c1"># point is on the line equation, but is it between end pts</span>
            <span class="n">xvals</span> <span class="o">=</span> <span class="p">[</span><span class="n">apoint</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">apoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">]</span>
            <span class="n">yvals</span> <span class="o">=</span> <span class="p">[</span><span class="n">apoint</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">apoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">]</span>
            <span class="n">xin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xvals</span><span class="p">)</span><span class="o">-</span><span class="n">ACC</span> <span class="o">&lt;=</span> <span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xvals</span><span class="p">)</span><span class="o">+</span><span class="n">ACC</span>
            <span class="n">yin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">yvals</span><span class="p">)</span><span class="o">-</span><span class="n">ACC</span> <span class="o">&lt;=</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">yvals</span><span class="p">)</span><span class="o">+</span><span class="n">ACC</span>
            <span class="k">if</span> <span class="n">xin</span> <span class="ow">and</span> <span class="n">yin</span><span class="p">:</span>
                <span class="c1"># we&#39;re on the line</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># we&#39;re off of the line</span>
                <span class="c1"># print(&#39;  outside of bounds!&#39;)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># point is not on line equation</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Line.intersects"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Line.intersects">[docs]</a>    <span class="k">def</span> <span class="nf">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if other line intersects this line.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Line, Arc, Signline, SignArc): other line to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point or None:</span>
<span class="sd">                Point: intersection point</span>
<span class="sd">                None: None if lines don&#39;t intersect</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># other is cutline when checking</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Line</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">):</span>
            <span class="n">terms_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_abc</span><span class="p">()</span>
            <span class="n">terms_2</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_abc</span><span class="p">()</span>
            <span class="n">p_1</span><span class="p">,</span> <span class="n">p_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">p_3</span><span class="p">,</span> <span class="n">p_4</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">p_1</span> <span class="o">-</span> <span class="n">p_3</span><span class="p">,</span> <span class="n">p_1</span> <span class="o">-</span> <span class="n">p_4</span><span class="p">,</span> <span class="n">p_2</span> <span class="o">-</span> <span class="n">p_3</span><span class="p">,</span> <span class="n">p_2</span> <span class="o">-</span> <span class="n">p_4</span><span class="p">]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">p_1</span><span class="p">,</span> <span class="n">p_1</span><span class="p">,</span> <span class="n">p_2</span><span class="p">,</span> <span class="n">p_2</span><span class="p">]</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dist</span><span class="p">]</span>
            <span class="c1"># check each of self&#39;s point to see if it == other&#39;s points</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">val</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">terms_1</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">terms_2</span><span class="p">[:</span><span class="mi">2</span><span class="p">]:</span>
                <span class="c1"># lines are parallel and will not have an intersection point</span>
                <span class="c1">#print(&#39;Line-Line intersection = None: same slope&#39;)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">denom</span> <span class="o">=</span> <span class="p">(</span><span class="n">p_1</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">p_2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">p_3</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">p_4</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">p_1</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">p_2</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">p_3</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">p_4</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">denom</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
                <span class="c1"># lines are nearly identical slope</span>
                <span class="c1">#print(&#39;Line-Line intersection = None because of denom&#39;)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># intersection calculation</span>
                <span class="n">a_array</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="n">terms_1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">terms_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                                 <span class="p">[</span><span class="n">terms_2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">terms_2</span><span class="p">[</span><span class="mi">1</span><span class="p">]]])</span>
                <span class="n">b_array</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">terms_1</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="o">-</span><span class="n">terms_2</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">linsolve</span><span class="p">(</span><span class="n">a_array</span><span class="p">,</span> <span class="n">b_array</span><span class="p">)</span>
                <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="c1"># check against existing points on self</span>
                <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span> <span class="o">-</span> <span class="n">p_1</span><span class="p">,</span> <span class="n">point</span> <span class="o">-</span> <span class="n">p_2</span><span class="p">]</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">p_1</span><span class="p">,</span> <span class="n">p_2</span><span class="p">]</span>
                <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dist</span><span class="p">]</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
                        <span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="n">on_self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
                <span class="n">on_other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">on_self</span> <span class="ow">and</span> <span class="n">on_other</span><span class="p">:</span>
                    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                    s_name = self.get_name()</span>
<span class="sd">                    o_name = other.get_name()</span>
<span class="sd">                    print(&#39;X Checking intersection of %s and %s&#39; % (s_name, o_name))</span>
<span class="sd">                    print(&#39;  %s&#39; % point)</span>
<span class="sd">                    print(&#39;  (on_self, on_other): (%s, %s)&#39; % (on_self, on_other))</span>
<span class="sd">                    &quot;&quot;&quot;</span>
                    <span class="k">return</span> <span class="n">point</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                    print(&#39;Line-Line intersection = None point not on lines&#39;)</span>
<span class="sd">                    print(&#39; %s&#39; % point)</span>
<span class="sd">                    print(&#39; on_self: %s&#39; % on_self)</span>
<span class="sd">                    print(&#39; on_other: %s&#39; % on_other)</span>
<span class="sd">                    &quot;&quot;&quot;</span>
                    <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Arc</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
            <span class="c1"># arc line intersection</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns string listing object type, name, and points&quot;&quot;&quot;</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s1">&#39;Line </span><span class="si">%s</span><span class="s1">, start: </span><span class="si">%s</span><span class="s1"> end: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="SignLine"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine">[docs]</a><span class="k">class</span> <span class="nc">SignLine</span><span class="p">(</span><span class="n">Line</span><span class="p">,</span> <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes a signed line.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        line (Line): parent line</span>
<span class="sd">        sign (int): 1 = positive, or -1 = negative</span>
<span class="sd">        lineloop (None or LineLoop): parent LineLoop, default is None</span>
<span class="sd">        faces (list): list of element faces</span>
<span class="sd">        n1 (list): list of first order nodes on line</span>
<span class="sd">        nodes (list): nodes on the line</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_line</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">parent_line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineloop</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="SignLine.pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.pt">[docs]</a>    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the point at the start or end of the line.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): 0 = start point, 1 = end point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="ow">not</span> <span class="n">index</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="SignLine.set_pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.set_pt">[docs]</a>    <span class="k">def</span> <span class="nf">set_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the start or end point of the line to a new point.</span>

<span class="sd">        Args:</span>
<span class="sd">            index (int): 0 for start point, 1 for end point</span>
<span class="sd">            point (Point): the new point we are updating to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_pt</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignLine.set_ediv"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.set_ediv">[docs]</a>    <span class="k">def</span> <span class="nf">set_ediv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ediv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies the element divisions onto the parent line.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_ediv</span><span class="p">(</span><span class="n">ediv</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignLine.set_esize"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.set_esize">[docs]</a>    <span class="k">def</span> <span class="nf">set_esize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esize</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies the element size onto the parent line.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_esize</span><span class="p">(</span><span class="n">esize</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignLine.set_lineloop"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.set_lineloop">[docs]</a>    <span class="k">def</span> <span class="nf">set_lineloop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineloop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the parent LineLoop&quot;&quot;&quot;</span>
        <span class="c1"># this is needed to cascade set ediv up to FEA model and down onto</span>
        <span class="c1"># other lines with this ediv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineloop</span> <span class="o">=</span> <span class="n">lineloop</span></div>

<div class="viewcode-block" id="SignLine.get_name"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the SignLine name.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;-L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignLine.label"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.label">[docs]</a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Labels the line on the matplotlib ax axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            ax (Matplotlib axis): Matplotlib axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># find angle of perpendiclar line so we can set text alignment</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_perp_vec</span><span class="p">()</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">lvect</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">()</span>
        <span class="n">horiz</span><span class="p">,</span> <span class="n">vert</span> <span class="o">=</span> <span class="n">get_text_hv</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">axial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">y</span>
        <span class="n">radial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">x</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">axial</span><span class="p">,</span> <span class="n">radial</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">ha</span><span class="o">=</span><span class="n">horiz</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="n">vert</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignLine.plot"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws and labels the line onto the passed Matplotlib axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            ax (Matlotlib axis): Matplotlib axis</span>
<span class="sd">            label (bool): if True label the line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lax</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">]</span>
        <span class="n">lrad</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">]</span>
        <span class="c1"># draw line</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lax</span><span class="p">,</span> <span class="n">lrad</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignLine.signed_copy"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.signed_copy">[docs]</a>    <span class="k">def</span> <span class="nf">signed_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a SignLine copy of this line.&quot;&quot;&quot;</span>
        <span class="n">realsign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span><span class="o">*</span><span class="n">sign</span>
        <span class="k">return</span> <span class="n">SignLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">realsign</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the line nodes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">nodes</span>

    <span class="nd">@nodes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nlist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the line nodes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="n">nlist</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">midpt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the mid point.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">midpt</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">edge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a bool saying if this is an edge line.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">edge</span>

    <span class="nd">@edge</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">isedge</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the line nodes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="n">isedge</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of the line&#39;s points [pstart, pend]&quot;&quot;&quot;</span>
        <span class="n">pstart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">pend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pstart</span><span class="p">,</span> <span class="n">pend</span><span class="p">]</span>

<div class="viewcode-block" id="SignLine.reverse"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignLine.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses self.line&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Arc"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc">[docs]</a><span class="k">class</span> <span class="nc">Arc</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes an arc from points start_pt to end_pt about center actr.</span>

<span class="sd">    Arcs should be 90 degrees maximum.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        start_pt (Point): first point</span>
<span class="sd">        end_pt (Point): second point</span>
<span class="sd">        actr (Point): arc center</span>

<span class="sd">    Attributes:</span>
<span class="sd">        points (list of Point) : list of the line&#39;s points [start_pt, end_pt]</span>
<span class="sd">        allpoints (list of Point): [start_pt, end_pt, actr]</span>
<span class="sd">        actr (Point): arc center</span>
<span class="sd">        radius (float): radius of the arc</span>
<span class="sd">        concavity (str):</span>

<span class="sd">            - &#39;concave&#39;: concave arc</span>
<span class="sd">            - &#39;convex&#39;: convex arc</span>

<span class="sd">        midpt (Point): a mid-point between p1 and p2</span>
<span class="sd">        ediv (None or int): number of elements on arc</span>
<span class="sd">        nodes (list of Node): a list of meshed nodes on the line</span>
<span class="sd">        edge (bool): True if arc is a non-shared edge in an area</span>
<span class="sd">        signlines (list): list of SignArc that use this Arc</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_pt</span><span class="p">,</span> <span class="n">end_pt</span><span class="p">,</span> <span class="n">actr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">start_pt</span><span class="p">,</span> <span class="n">end_pt</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">=</span> <span class="n">actr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actr</span><span class="o">.</span><span class="n">arc_center</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="p">(</span><span class="n">start_pt</span> <span class="o">-</span> <span class="n">actr</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_concavity</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ediv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Arc.reverse"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses self.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_concavity</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all points including arc center&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">areas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all areas that signlines use.&quot;&quot;&quot;</span>
        <span class="n">areas</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
            <span class="n">areas</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sline</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">areas</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bool telling if self == other</span>

<span class="sd">        Returns True if the lines are the same type, and contain the same</span>
<span class="sd">        list of points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="c1"># check to see if the end points are the same</span>
            <span class="n">mypts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span>
            <span class="n">otherpts</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">points</span>
            <span class="n">same</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">mypt</span><span class="p">,</span> <span class="n">otherpt</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">mypts</span><span class="p">,</span> <span class="n">otherpts</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">mypt</span> <span class="o">!=</span> <span class="n">otherpt</span><span class="p">:</span>
                    <span class="n">same</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="c1"># flip to false if arc centers are different</span>
            <span class="n">myactr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">otheractr</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">actr</span>
            <span class="k">if</span> <span class="n">myactr</span> <span class="o">!=</span> <span class="n">otheractr</span><span class="p">:</span>
                <span class="n">same</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">same</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the hash of the item to the id number.</span>

<span class="sd">        This allows one to make sets of these items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

<div class="viewcode-block" id="Arc.add_signline"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.add_signline">[docs]</a>    <span class="k">def</span> <span class="nf">add_signline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signline</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a signline to self.signlines.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">signline</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signline</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.get_name"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the arc name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.length"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.length">[docs]</a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of the arc.&quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ang_bet_rad</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">*</span><span class="n">ang</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Arc.save_to_points"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.save_to_points">[docs]</a>    <span class="k">def</span> <span class="nf">save_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This stores this line in the line&#39;s child points.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allpoints</span><span class="p">:</span>
            <span class="n">point</span><span class="o">.</span><span class="n">set_line</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.set_ediv"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.set_ediv">[docs]</a>    <span class="k">def</span> <span class="nf">set_ediv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ediv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the number of element divisions on the arc when meshing.</span>

<span class="sd">        Args:</span>
<span class="sd">            ediv (int): number of required elements on this arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ediv</span> <span class="o">=</span> <span class="n">ediv</span></div>

<div class="viewcode-block" id="Arc.set_esize"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.set_esize">[docs]</a>    <span class="k">def</span> <span class="nf">set_esize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esize</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the size of mesh elements on the arc when meshing.</span>

<span class="sd">        Args:</span>
<span class="sd">            esize (float): size of mesh elements on this arc</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">set_esize</span><span class="p">(</span><span class="n">esize</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.signed_copy"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.signed_copy">[docs]</a>    <span class="k">def</span> <span class="nf">signed_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a SignArc instance of this Arc with the passed sign.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SignArc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.pt">[docs]</a>    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the start or end point of the arc.</span>

<span class="sd">        Args:</span>
<span class="sd">            ind (int): index of the point we want, 0=start, 1=end</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point: requested Point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span></div>

<div class="viewcode-block" id="Arc.set_pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.set_pt">[docs]</a>    <span class="k">def</span> <span class="nf">set_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the arc&#39;s point at ind to the new point.</span>

<span class="sd">        Args:</span>
<span class="sd">            ind (int): index of the point we&#39;re updating, 0=start, 1=end</span>
<span class="sd">            point (Point): new point we are assigning to Line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># remove this line from the old point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># set the new point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_to_points</span><span class="p">()</span>
        <span class="n">other_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="ow">not</span> <span class="n">ind</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">point</span> <span class="o">==</span> <span class="n">other_point</span><span class="p">:</span>
            <span class="n">other_point</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
                <span class="n">sline</span><span class="o">.</span><span class="n">lineloop</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">area</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lineloop</span><span class="o">.</span><span class="n">parent</span>
                    <span class="n">area</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">fea</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Arc.mid"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.mid">[docs]</a>    <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Caclulates and returns the midpoint of the arc.&quot;&quot;&quot;</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pt_at</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pt</span></div>

<div class="viewcode-block" id="Arc.touches"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.touches">[docs]</a>    <span class="k">def</span> <span class="nf">touches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if this arc is connected to a passed line.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Line or Arc): passed other line</span>

<span class="sd">        Returns:</span>
<span class="sd">            True: beginning or end point connect to other line</span>
<span class="sd">            False: lines are not connected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">p1</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">points</span> <span class="ow">or</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Arc.sgn"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.sgn">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sgn</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns sign of the passed value.</span>

<span class="sd">        Helper function for self.interects code.</span>

<span class="sd">        Args:</span>
<span class="sd">            val (float): passed value</span>

<span class="sd">        Returns:</span>
<span class="sd">            1 or -1: sign of the passed value, assumes sign of zero = 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Arc.get_ang"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_ang">[docs]</a>    <span class="k">def</span> <span class="nf">get_ang</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns angle from beginning to end of arc from arc ctr in degrees</span>

<span class="sd">        Notes:</span>
<span class="sd">            Answer is between 180 and -180</span>
<span class="sd">            Positive is concave</span>
<span class="sd">            Negative is convex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ang_bet_deg</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ang</span></div>

<div class="viewcode-block" id="Arc.get_ang_rad"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_ang_rad">[docs]</a>    <span class="k">def</span> <span class="nf">get_ang_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns angle from beginning to end of arc from arc ctr in rad</span>

<span class="sd">        Notes:</span>
<span class="sd">            Answer is between pi and -pi</span>
<span class="sd">            Positive is concave</span>
<span class="sd">            Negative is convex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ang_bet_rad</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ang</span></div>

<div class="viewcode-block" id="Arc.get_concavity"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_concavity">[docs]</a>    <span class="k">def</span> <span class="nf">get_concavity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clockwise</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns concavity of this arc, &#39;concave&#39; or &#39;convex&#39;.&quot;&quot;&quot;</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">clockwise</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;concave&#39;</span>
            <span class="k">if</span> <span class="n">ang</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;convex&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;convex&#39;</span>
            <span class="k">if</span> <span class="n">ang</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;concave&#39;</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Arc.get_pt_at"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_pt_at">[docs]</a>    <span class="k">def</span> <span class="nf">get_pt_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nondim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns point on arc between start and end point at nondim dist.</span>

<span class="sd">        Args:</span>
<span class="sd">            nondim (float): distance between start and end point, 0=start, 1=end</span>

<span class="sd">        Returns:</span>
<span class="sd">            res (Point): requested point on arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>

        <span class="c1"># neg is convex, pos is concave</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>

        <span class="n">ang_delta</span> <span class="o">=</span> <span class="n">nondim</span><span class="o">*</span><span class="n">ang</span>
        <span class="n">a</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="n">ang_delta</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">+</span> <span class="n">a</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Arc.get_perp_vec"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_perp_vec">[docs]</a>    <span class="k">def</span> <span class="nf">get_perp_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns vector perpendicular to current arc.</span>

<span class="sd">        Right hand rule is used:</span>
<span class="sd">            X+ is the direction of the arc from start to end.</span>
<span class="sd">            Z+ is out of the page</span>
<span class="sd">            Y+ is the direction of the perpendicular vector</span>

<span class="sd">        Args:</span>
<span class="sd">            pt (Point): point on arc where we want the perpendicular vector</span>

<span class="sd">        Returns:</span>
<span class="sd">            resv (Point): perpendicular vector</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;convex&#39;</span><span class="p">:</span>
            <span class="n">resv</span> <span class="o">=</span> <span class="n">pt</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;concave&#39;</span><span class="p">:</span>
            <span class="n">resv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">-</span> <span class="n">pt</span>
        <span class="k">return</span> <span class="n">resv</span></div>

<div class="viewcode-block" id="Arc.get_tan_vec"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_tan_vec">[docs]</a>    <span class="k">def</span> <span class="nf">get_tan_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns vector tangent to the current arc.</span>

<span class="sd">        Vector points from the passed point to a unit location further away.</span>

<span class="sd">        Args:</span>
<span class="sd">            point (Point): start point</span>

<span class="sd">        Returns:</span>
<span class="sd">            resv (Point): vector that is tangent to the current line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;concave&#39;</span><span class="p">:</span>
            <span class="n">resv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span> <span class="o">-</span> <span class="n">point</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;convex&#39;</span><span class="p">:</span>
            <span class="n">resv</span> <span class="o">=</span> <span class="n">point</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="k">if</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">resv</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resv</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">resv</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">resv</span></div>

<div class="viewcode-block" id="Arc.get_verts_codes"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.get_verts_codes">[docs]</a>    <span class="k">def</span> <span class="nf">get_verts_codes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of [verts, codes] vertices for plotting.&quot;&quot;&quot;</span>
        <span class="c1"># http://www.spaceroots.org/documents/ellipse/node19.html</span>
        <span class="c1"># http://www.tinaja.com/glib/bezarc1.pdf</span>
        <span class="c1"># http://stackoverflow.com/questions/734076/geometrical-arc-to-bezier-curve</span>

        <span class="c1"># find the angle of rotation to the middle of the arc</span>
        <span class="n">ang_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pt_at</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">ang_offset</span> <span class="o">=</span> <span class="n">ang_offset</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">()</span>

        <span class="c1"># store the half angle as theta</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">radians</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()))</span><span class="o">*</span><span class="mf">0.5</span>

        <span class="n">ax1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span><span class="o">/</span><span class="mi">3</span>
        <span class="n">rad1</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span>
        <span class="n">pt1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">rad1</span><span class="p">,</span> <span class="n">ax1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="n">rad1</span><span class="p">,</span> <span class="n">ax1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

        <span class="c1"># fix the angles</span>
        <span class="n">pt1</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="n">ang_offset</span><span class="p">)</span>
        <span class="n">pt2</span><span class="o">.</span><span class="n">rot_ccw_deg</span><span class="p">(</span><span class="n">ang_offset</span><span class="p">)</span>

        <span class="c1"># fix the location</span>
        <span class="n">pt1</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">pt2</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>

        <span class="c1"># need to change the order if the arc is concave or convex</span>
        <span class="n">verts</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt1</span><span class="p">,</span> <span class="n">pt2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;convex&#39;</span><span class="p">:</span>
            <span class="n">verts</span> <span class="o">=</span> <span class="p">[</span><span class="n">pt2</span><span class="p">,</span> <span class="n">pt1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">plot</span><span class="p">:</span>
            <span class="n">verts</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="o">.</span><span class="n">axrad</span><span class="p">()</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">verts</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">verts</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="o">.</span><span class="n">radax</span><span class="p">()</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">verts</span><span class="p">]</span>
        <span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="o">.</span><span class="n">CURVE4</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE4</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE4</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">verts</span><span class="p">,</span> <span class="n">codes</span><span class="p">]</span></div>

<div class="viewcode-block" id="Arc.coincident"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.coincident">[docs]</a>    <span class="k">def</span> <span class="nf">coincident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks to see if pt is on the arc.</span>

<span class="sd">        Args:</span>
<span class="sd">            pt (Point): input point to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if pt on arc or False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># (x - xc)^2 + (y - yc)^2 - r^2 = 0</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">pt</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">pt</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dist</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
            <span class="c1"># True if point almost equal to end points</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">remainder</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
                        <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">remainder</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
            <span class="c1"># point is on the circle, but is it in the arc?</span>
            <span class="c1"># check if the angle traversed to the point is within the ang</span>
            <span class="c1"># traversed by the arc</span>
            <span class="n">a1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">a2</span> <span class="o">=</span> <span class="n">pt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">ang_pt</span> <span class="o">=</span> <span class="n">a1</span><span class="o">.</span><span class="n">ang_bet_deg</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>

            <span class="c1"># this is the angle traversed byt the arc</span>
            <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>
            <span class="n">minval</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ang</span><span class="p">)</span>
            <span class="n">maxval</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ang</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">minval</span> <span class="o">&lt;=</span> <span class="n">ang_pt</span> <span class="o">&lt;=</span> <span class="n">maxval</span><span class="p">:</span>
                <span class="c1"># point is on our arc</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># point on circle but outside our arc</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># point not on arc</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Arc.intersects"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Arc.intersects">[docs]</a>    <span class="k">def</span> <span class="nf">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if other line intersects this arc.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Line or Arc): other line to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            Point or None:</span>
<span class="sd">                Point: intersection point</span>
<span class="sd">                None: None if lines don&#39;t intersect</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Line</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">):</span>
            <span class="c1">#print(&#39;|C Checking arc-line intersection&#39;)</span>
            <span class="c1">#print(&#39; %s&#39; % self)</span>
            <span class="c1"># arc-line intersection</span>
            <span class="c1"># reset the math to be about the circle centroid</span>
            <span class="c1"># http://mathworld.wolfram.com/Circle-LineIntersection.html</span>
            <span class="n">pt1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="n">pt2</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
            <span class="c1"># for us x and y are reversed because of y axial</span>
            <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">pt1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pt1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pt2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pt2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span>
            <span class="n">rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
            <span class="n">dr</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">dy</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">D</span> <span class="o">=</span> <span class="n">x1</span><span class="o">*</span><span class="n">y2</span> <span class="o">-</span> <span class="n">x2</span><span class="o">*</span><span class="n">y1</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dist</span><span class="p">]</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">val</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="n">discr</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="n">rad</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">D</span><span class="o">**</span><span class="mi">2</span>
            <span class="k">if</span> <span class="n">discr</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># no intersection</span>
                <span class="c1">#print(&#39;none returned because of discriminant&#39;)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># tangent or intersection</span>
                <span class="n">rsq</span> <span class="o">=</span> <span class="n">rad</span><span class="o">**</span><span class="mi">2</span>
                <span class="n">drsq</span> <span class="o">=</span> <span class="n">dr</span><span class="o">**</span><span class="mi">2</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="p">(</span><span class="n">D</span><span class="o">*</span><span class="n">dy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sgn</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="n">dx</span><span class="o">*</span><span class="p">(</span><span class="n">rsq</span><span class="o">*</span><span class="n">drsq</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="n">drsq</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">D</span><span class="o">*</span><span class="n">dx</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">rsq</span><span class="o">*</span><span class="p">(</span><span class="n">dr</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="n">drsq</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="p">(</span><span class="n">D</span><span class="o">*</span><span class="n">dy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sgn</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="n">dx</span><span class="o">*</span><span class="p">(</span><span class="n">rsq</span><span class="o">*</span><span class="n">drsq</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="n">drsq</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">D</span><span class="o">*</span><span class="n">dx</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">rsq</span><span class="o">*</span><span class="n">drsq</span><span class="o">-</span><span class="n">D</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span><span class="o">/</span><span class="n">drsq</span>

                <span class="c1"># convert result points back to global coordinates</span>
                <span class="n">pt1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
                <span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
                <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="c1"># check that the resultant points are on line and arcs</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">pt1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">pt1</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">apoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
                        <span class="n">dist</span> <span class="o">=</span> <span class="n">pt1</span> <span class="o">-</span> <span class="n">apoint</span>
                        <span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
                            <span class="n">pt1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">apoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">apoint</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                            <span class="k">break</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pt1</span> <span class="o">!=</span> <span class="n">pt2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">pt2</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">pt2</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">apoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
                        <span class="n">dist</span> <span class="o">=</span> <span class="n">pt2</span> <span class="o">-</span> <span class="n">apoint</span>
                        <span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">ACC</span><span class="p">:</span>
                            <span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">apoint</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">apoint</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                            <span class="k">break</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt2</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">res</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1">#print(&#39;none returned because no point from math&#39;)</span>
                    <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
            <span class="c1"># arc-arc intersection</span>
            <span class="c1"># I have not yet written the code here</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns string listing object type, name, and points&quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">actr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s1">&#39;Arc </span><span class="si">%s</span><span class="s1">, start: </span><span class="si">%s</span><span class="s1"> end: </span><span class="si">%s</span><span class="s1"> center: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">actr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="SignArc"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc">[docs]</a><span class="k">class</span> <span class="nc">SignArc</span><span class="p">(</span><span class="n">Arc</span><span class="p">,</span> <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes a signed arc.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        line (Arc): parent arc</span>
<span class="sd">        sign (int): 1 = positive, or -1 = negative</span>
<span class="sd">        lineloop (None or LineLoop): parent LineLoop, default is None</span>
<span class="sd">        nodes (list): nodes on the arc</span>
<span class="sd">        faces (list): list of element faces</span>
<span class="sd">        n1 (list): list of first order nodes on line</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_line</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">parent_line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineloop</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="SignArc.pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.pt">[docs]</a>    <span class="k">def</span> <span class="nf">pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the point at the start or end of the line.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="ow">not</span> <span class="n">ind</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span></div>

<div class="viewcode-block" id="SignArc.set_pt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.set_pt">[docs]</a>    <span class="k">def</span> <span class="nf">set_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the passed point to at the index location.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_pt</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignArc.set_ediv"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.set_ediv">[docs]</a>    <span class="k">def</span> <span class="nf">set_ediv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ediv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply the element divisions onto the parent line.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_ediv</span><span class="p">(</span><span class="n">ediv</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignArc.set_esize"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.set_esize">[docs]</a>    <span class="k">def</span> <span class="nf">set_esize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esize</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies the element size onto the parent line.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_esize</span><span class="p">(</span><span class="n">esize</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignArc.set_lineloop"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.set_lineloop">[docs]</a>    <span class="k">def</span> <span class="nf">set_lineloop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineloop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the parent LineLoop&quot;&quot;&quot;</span>
        <span class="c1"># this is needed to cascade set ediv up to FEA model and down onto</span>
        <span class="c1"># other lines with this ediv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineloop</span> <span class="o">=</span> <span class="n">lineloop</span></div>

<div class="viewcode-block" id="SignArc.get_name"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the line name.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;-L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;L&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignArc.label"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.label">[docs]</a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Labels the arc on the matplotlib ax axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            ax (Matplotlib axis): Matplotlib axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lvect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_perp_vec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="p">)</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">lvect</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">()</span>
        <span class="n">horiz</span><span class="p">,</span> <span class="n">vert</span> <span class="o">=</span> <span class="n">get_text_hv</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span>
        <span class="p">(</span><span class="n">axial</span><span class="p">,</span> <span class="n">radial</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">midpt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">axial</span><span class="p">,</span> <span class="n">radial</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">ha</span><span class="o">=</span><span class="n">horiz</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="n">vert</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignArc.plot"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws and labels the arc onto the passed Matplotlib axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            ax: Matplotlib axis</span>
<span class="sd">            label (bool): if True, label the arc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actr</span>
        <span class="n">vect1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;concave&#39;</span><span class="p">:</span>
            <span class="n">vect1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="n">ctr</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">vect1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">ctr</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="n">ang1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vect1</span><span class="o">.</span><span class="n">ang_deg</span><span class="p">())</span>
        <span class="n">ang2</span> <span class="o">=</span> <span class="n">ang1</span> <span class="o">+</span> <span class="n">sign</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ang</span><span class="p">()</span>

        <span class="c1"># matplotlib assumes ccw arc drawing, calculix assumes cw drawing</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">AArc</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="n">ctr</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ctr</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">rad</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">rad</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">theta1</span><span class="o">=</span><span class="n">ang1</span><span class="p">,</span> <span class="n">theta2</span><span class="o">=</span><span class="n">ang2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span></div>

<div class="viewcode-block" id="SignArc.signed_copy"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.signed_copy">[docs]</a>    <span class="k">def</span> <span class="nf">signed_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a SignArc copy of this arc.&quot;&quot;&quot;</span>
        <span class="n">realsign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span><span class="o">*</span><span class="n">sign</span>
        <span class="k">return</span> <span class="n">SignArc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">realsign</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the line nodes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">nodes</span>

    <span class="nd">@nodes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nlist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the line nodes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="n">nlist</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">actr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the arc center.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">actr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the arc radius.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">radius</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">midpt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the mid point.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">midpt</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">edge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a bool saying if this is an edge line.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">edge</span>

    <span class="nd">@edge</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">isedge</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the line nodes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="n">isedge</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of the arc&#39;s points [pstart, pend]&quot;&quot;&quot;</span>
        <span class="n">pstart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">pend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pstart</span><span class="p">,</span> <span class="n">pend</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">concavity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the arc&#39;s concavity &#39;concave&#39; or &#39;convex&#39;&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sign</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">concavity</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">concavity</span> <span class="o">==</span> <span class="s1">&#39;concave&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;convex&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;concave&#39;</span>

<div class="viewcode-block" id="SignArc.reverse"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.SignArc.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverses self.line&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="LineLoop"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop">[docs]</a><span class="k">class</span> <span class="nc">LineLoop</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes a LineLoop, which stores multiple Line/Arc or SignLine/SignArc.</span>

<span class="sd">    Args:</span>
<span class="sd">        items (list): Line or Arc or SignLine or SignArc</span>
<span class="sd">        hole_bool (bool): True if hole, False otherwise</span>
<span class="sd">        parent (Area or None): parent Area, defaults to None</span>

<span class="sd">    Attributes:</span>
<span class="sd">        closed (bool): True if closed</span>
<span class="sd">        area (float): the loop&#39;s area, can be pos or neg. Pos = cw, neg = ccw</span>
<span class="sd">        hole (bool): True if loop is a hole</span>
<span class="sd">        ccw (bool): True if loop is counter-clockwise</span>
<span class="sd">        center (Point): a point at the loop centroid</span>
<span class="sd">        parent (Area or None): the loop&#39;s parent Area</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="p">[],</span> <span class="n">hole_bool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">lineloop</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">add_signline</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hole</span> <span class="o">=</span> <span class="n">hole_bool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

<div class="viewcode-block" id="LineLoop.set_id"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.set_id">[docs]</a>    <span class="k">def</span> <span class="nf">set_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the id number&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span></div>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the hash of the item to the id number.</span>

<span class="sd">        This allows one to make sets of these items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">closed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns True if Closed, False if not.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">curr_line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">lower_ind</span> <span class="o">=</span> <span class="n">ind</span><span class="o">-</span><span class="mi">1</span>
                <span class="n">prev_line</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">lower_ind</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">curr_line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev_line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns None or a Point at the line loop&#39;s center.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cx_sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">cy_sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">a_sum</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">arcs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Line</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">):</span>
                    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">det_val</span> <span class="o">=</span> <span class="n">det</span><span class="p">([[</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]])</span>
                    <span class="n">cx_sum</span> <span class="o">+=</span> <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">det_val</span>
                    <span class="n">cy_sum</span> <span class="o">+=</span> <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="n">det_val</span>
                    <span class="n">a_sum</span> <span class="o">+=</span> <span class="n">det_val</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Arc</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
                    <span class="c1"># concave: draw to actr, adder is neg</span>
                    <span class="c1"># convex:  draw to actr, adder is pos</span>
                    <span class="n">tmp_list</span> <span class="o">=</span> <span class="p">[[</span><span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">item</span><span class="o">.</span><span class="n">actr</span><span class="p">],</span>
                                <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">actr</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)]]</span>
                    <span class="k">for</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]</span> <span class="ow">in</span> <span class="n">tmp_list</span><span class="p">:</span>
                        <span class="n">det_val</span> <span class="o">=</span> <span class="n">det</span><span class="p">([[</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]])</span>
                        <span class="n">cx_sum</span> <span class="o">+=</span> <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">det_val</span>
                        <span class="n">cy_sum</span> <span class="o">+=</span> <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="n">det_val</span>
                        <span class="n">a_sum</span> <span class="o">+=</span> <span class="n">det_val</span>
                    <span class="n">arcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">area_val</span> <span class="o">=</span> <span class="n">a_sum</span><span class="o">*</span><span class="mf">0.5</span>
            <span class="n">val_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">area_val</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cx_val</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">area_val</span><span class="p">))</span><span class="o">*</span><span class="n">cx_sum</span>
                <span class="n">cy_val</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">area_val</span><span class="p">))</span><span class="o">*</span><span class="n">cy_sum</span>
                <span class="n">val_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">area_val</span><span class="p">,</span> <span class="n">cx_val</span><span class="p">,</span> <span class="n">cy_val</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
                <span class="n">ang</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">get_ang_rad</span><span class="p">()</span>
                <span class="n">area_val</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">ang</span><span class="o">*</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">half_ang</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ang</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span>
                <span class="n">vect</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">midpt</span> <span class="o">-</span> <span class="n">arc</span><span class="o">.</span><span class="n">actr</span>
                <span class="n">vect</span><span class="o">.</span><span class="n">make_unit</span><span class="p">()</span>
                <span class="n">mag</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">half_ang</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">half_ang</span><span class="p">)</span>
                <span class="n">vect</span> <span class="o">=</span> <span class="n">vect</span><span class="o">*</span><span class="n">mag</span>
                <span class="n">center</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">actr</span> <span class="o">+</span> <span class="n">vect</span>
                <span class="n">val_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">area_val</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
            <span class="n">a_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">aval</span> <span class="k">for</span> <span class="p">[</span><span class="n">aval</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">]</span> <span class="ow">in</span> <span class="n">val_list</span><span class="p">])</span>
            <span class="n">cxa_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">cx</span><span class="o">*</span><span class="n">aval</span> <span class="k">for</span> <span class="p">[</span><span class="n">aval</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">]</span> <span class="ow">in</span> <span class="n">val_list</span><span class="p">])</span>
            <span class="n">cya_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">cy</span><span class="o">*</span><span class="n">aval</span> <span class="k">for</span> <span class="p">[</span><span class="n">aval</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">]</span> <span class="ow">in</span> <span class="n">val_list</span><span class="p">])</span>
            <span class="n">cx_val</span> <span class="o">=</span> <span class="n">cxa_sum</span><span class="o">/</span><span class="n">a_sum</span>
            <span class="n">cy_val</span> <span class="o">=</span> <span class="n">cya_sum</span><span class="o">/</span><span class="n">a_sum</span>
            <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">cx_val</span><span class="p">,</span> <span class="n">cy_val</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ccw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bool telling if the area is closed and clockwise.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">area_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span>
            <span class="k">if</span> <span class="n">area_val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the loop&#39;s signed area.</span>

<span class="sd">        Returns 0 if not closed.</span>
<span class="sd">        Pos = cw, neg = ccw</span>

<span class="sd">        Formula from: http://mathworld.wolfram.com/PolygonArea.html</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">adder</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">arcs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Line</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">):</span>
                    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">det_matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]]</span>
                    <span class="n">res</span> <span class="o">+=</span> <span class="n">det</span><span class="p">(</span><span class="n">det_matrix</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Arc</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
                    <span class="c1"># concave: draw to actr, adder is neg</span>
                    <span class="c1"># convex:  draw to actr, adder is pos</span>
                    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">item</span><span class="o">.</span><span class="n">actr</span>
                    <span class="n">det_matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]]</span>
                    <span class="n">res</span> <span class="o">+=</span> <span class="n">det</span><span class="p">(</span><span class="n">det_matrix</span><span class="p">)</span>
                    <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">actr</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">det_matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">start</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">start</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">end</span><span class="o">.</span><span class="n">y</span><span class="p">]]</span>
                    <span class="n">res</span> <span class="o">+=</span> <span class="n">det</span><span class="p">(</span><span class="n">det_matrix</span><span class="p">)</span>
                    <span class="n">arcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">res</span>
            <span class="c1"># need to loop through arcs here, now that we know if cw or ccw</span>
            <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
                <span class="n">ang</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">get_ang_rad</span><span class="p">()</span>
                <span class="n">tmp_adder</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">ang</span><span class="o">*</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">adder</span> <span class="o">+=</span> <span class="n">tmp_adder</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="n">adder</span>
            <span class="k">return</span> <span class="n">res</span>

<div class="viewcode-block" id="LineLoop.reverse"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.reverse">[docs]</a>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reverse the loop direction cw&lt;--&gt;ccw</span>

<span class="sd">        This modifies the order of lines, and flips each line.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineLoop.set_parent"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.set_parent">[docs]</a>    <span class="k">def</span> <span class="nf">set_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the line loop&#39;s parent part.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span></div>

<div class="viewcode-block" id="LineLoop.get_patch"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.get_patch">[docs]</a>    <span class="k">def</span> <span class="nf">get_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a patch of the LineLoop, or None of not closed.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="n">codes</span><span class="p">,</span> <span class="n">verts</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="c1"># start poly</span>
            <span class="n">codes</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Path</span><span class="o">.</span><span class="n">MOVETO</span><span class="p">]</span>
            <span class="n">verts</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">radax</span><span class="p">()]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">Line</span><span class="p">):</span>
                    <span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">radax</span><span class="p">())</span>
                    <span class="n">codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">Arc</span><span class="p">):</span>
                    <span class="n">lverts</span><span class="p">,</span> <span class="n">lcodes</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_verts_codes</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">verts</span> <span class="o">+=</span> <span class="n">lverts</span>
                    <span class="n">codes</span> <span class="o">+=</span> <span class="n">lcodes</span>
                <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="bp">self</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="c1"># close poly if at last line</span>
                    <span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
                    <span class="n">codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">CLOSEPOLY</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">verts</span><span class="p">,</span> <span class="n">codes</span><span class="p">)</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">patch</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="LineLoop.contains_point"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.contains_point">[docs]</a>    <span class="k">def</span> <span class="nf">contains_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bool telling if pt is inside the LineLoop.</span>

<span class="sd">        Args:</span>
<span class="sd">            pt (Point): point we are checking</span>

<span class="sd">        Returns:</span>
<span class="sd">            contains (bool): True if in this area False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">contains</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_patch</span><span class="p">()</span>
            <span class="n">contains</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">radax</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">contains</span></div>

<div class="viewcode-block" id="LineLoop.inside"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.inside">[docs]</a>    <span class="k">def</span> <span class="nf">inside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks to see if self is inside other.</span>

<span class="sd">        Only checks self&#39;s points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LineLoop</span><span class="p">):</span>
            <span class="n">points</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">points</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sline</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_patch</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                <span class="n">contains</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">radax</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">contains</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="LineLoop.append"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds an item to this LineLoop</span>

<span class="sd">        Args:</span>
<span class="sd">          item (SingArc or SignLine): item to add to the list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
            <span class="n">item</span><span class="o">.</span><span class="n">set_lineloop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="LineLoop.remove"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes an SignLine or SignArc item from this LineLoop</span>

<span class="sd">        Args:</span>
<span class="sd">          item (SignArc or SignLine): item to remove</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
            <span class="n">item</span><span class="o">.</span><span class="n">set_lineloop</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;===THIS SLINE NOT IN SLINE.LINE.SIGNLINES!===&#39;&#39;&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Removing sline </span><span class="si">%s</span><span class="s1"> from loop in area </span><span class="si">%s</span><span class="s1">&#39;</span>
                      <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SLINE.LINE </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">item</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SLINE.LINE.SIGNLINES </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">item</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">signlines</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>

<div class="viewcode-block" id="LineLoop.insert"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.LineLoop.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inserts a SignLine or SignArc item into this LineLoop</span>

<span class="sd">        Args:</span>
<span class="sd">          item (SingArc or SignLine): item to insert</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
            <span class="n">item</span><span class="o">.</span><span class="n">set_lineloop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prints the LineLoop definition.&quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;Number of items </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">line</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Area"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area">[docs]</a><span class="k">class</span> <span class="nc">Area</span><span class="p">(</span><span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Makes an area.</span>

<span class="sd">    Area is closed in a clockwise direction.</span>

<span class="sd">    Args:</span>
<span class="sd">        part (Part): parent Part</span>
<span class="sd">        line_list (list): list of Lines and Arcs that close the area</span>

<span class="sd">    Attributes:</span>
<span class="sd">        part (Part): parent part</span>
<span class="sd">        closed (boolean): True if closed, False if not</span>
<span class="sd">        exlines (LineLoop): LineLoop of signlines that define the area exterior</span>
<span class="sd">        signlines (list): list of signed lines or arcs that define the area</span>
<span class="sd">        lines (list): a list of all the lines that make the area, includes hole</span>
<span class="sd">            lines</span>
<span class="sd">        points (list): a list of all points making the area, excludes arc centers</span>
<span class="sd">        allpoints (list): a list of all points, includes arc centers</span>
<span class="sd">        holepoints (list): a list of hole points, excludes arc centers</span>
<span class="sd">        matl (Matl): the material fo the area</span>
<span class="sd">        etype (str): element type of area. Options are:</span>
<span class="sd">            &#39;plstress&#39;: plane stress</span>
<span class="sd">            &#39;plstrain&#39;: plane strain</span>
<span class="sd">            &#39;axisym&#39;: axisymmetric</span>
<span class="sd">        area (double): in-plane part area (ballpark number, arcs not calc right)</span>
<span class="sd">        holes (list): list of LineLoop of signlines</span>
<span class="sd">        center (Point or None): the area centroid point. None before closed.</span>
<span class="sd">        nodes (list): child mesh nodes that are in the area</span>
<span class="sd">        elements (list): child elements that are in the area</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">line_list</span><span class="o">=</span><span class="p">[]):</span>
        <span class="n">base_classes</span><span class="o">.</span><span class="n">Idobj</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part</span> <span class="o">=</span> <span class="n">part</span> <span class="c1"># parent part reference</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matl</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etype</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">holes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">exloop</span> <span class="o">=</span> <span class="n">LineLoop</span><span class="p">(</span><span class="n">line_list</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">fea</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">exloop</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span> <span class="o">=</span> <span class="n">exloop</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the item&#39;s id as its hash.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all Line and Arc under this area.&quot;&quot;&quot;</span>
        <span class="n">mylist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">loops</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span>
        <span class="k">for</span> <span class="n">loop</span> <span class="ow">in</span> <span class="n">loops</span><span class="p">:</span>
            <span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">loop</span><span class="p">]</span>
            <span class="n">mylist</span> <span class="o">+=</span> <span class="n">line_list</span>
        <span class="k">return</span> <span class="n">mylist</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">signlines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all SignLine and SignArc under this area.&quot;&quot;&quot;</span>
        <span class="n">mylist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">loops</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span>
        <span class="k">for</span> <span class="n">loop</span> <span class="ow">in</span> <span class="n">loops</span><span class="p">:</span>
            <span class="n">mylist</span> <span class="o">+=</span> <span class="n">loop</span>
        <span class="k">return</span> <span class="n">mylist</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all points under this area; excludes arc centers.&quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">pts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all points under this area; includes arc centers.&quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">pts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">allpoints</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">holepoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all points in this area&#39;s holes.&quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">hole</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="n">hole</span><span class="p">:</span>
                <span class="n">pts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sline</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string listing the area&#39;s name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>

<div class="viewcode-block" id="Area.get_name"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the area name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;A&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Area.close"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Closes the area.&quot;&quot;&quot;</span>
        <span class="c1"># sets closed=True</span>
        <span class="c1"># calculates the area center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">ccw</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_area_center</span><span class="p">()</span></div>

<div class="viewcode-block" id="Area.line_from_startpt"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.line_from_startpt">[docs]</a>    <span class="k">def</span> <span class="nf">line_from_startpt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the signline in the area that start at the passed pt.</span>

<span class="sd">        Args:</span>
<span class="sd">            pt (Point): the start point of the line one wants</span>

<span class="sd">        Returns:</span>
<span class="sd">            match (None or SignLine or SignArc):</span>
<span class="sd">            |  Returns None if no line is found, otherwise the correct line or</span>
<span class="sd">            |  arc which starts with pt will be</span>
<span class="sd">            |  returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># returns the line that starts on the given point</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">area_slines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span>
        <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="n">area_slines</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sline</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">pt</span><span class="p">:</span>
                <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># we have a saw cut in the area and we&#39;re cutting on one of its pts</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&gt;1 slines starting with </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
                <span class="n">slines</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">signlines</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">slines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">slines</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">area_slines</span><span class="p">):</span>
                    <span class="c1"># this is the saw cut one</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># we want the non saw cut one</span>
                    <span class="k">return</span> <span class="n">match</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Area.calc_area_center"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.calc_area_center">[docs]</a>    <span class="k">def</span> <span class="nf">calc_area_center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculates and returns the area and centroid Point.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: [area, Point]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">loops</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span>
        <span class="n">val_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">loop</span> <span class="ow">in</span> <span class="n">loops</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">loop</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">aval</span><span class="p">,</span> <span class="n">cval</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="n">loop</span><span class="o">.</span><span class="n">center</span>
                <span class="n">val_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">aval</span><span class="p">,</span> <span class="n">cval</span><span class="p">])</span>
        <span class="n">a_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">aval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">aval</span> <span class="ow">in</span> <span class="n">val_list</span><span class="p">])</span>
        <span class="n">cxa_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">aval</span> <span class="k">for</span> <span class="p">[</span><span class="n">aval</span><span class="p">,</span> <span class="n">center</span><span class="p">]</span> <span class="ow">in</span> <span class="n">val_list</span><span class="p">])</span>
        <span class="n">cya_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">aval</span> <span class="k">for</span> <span class="p">[</span><span class="n">aval</span><span class="p">,</span> <span class="n">center</span><span class="p">]</span> <span class="ow">in</span> <span class="n">val_list</span><span class="p">])</span>
        <span class="n">cx_val</span> <span class="o">=</span> <span class="n">cxa_sum</span><span class="o">/</span><span class="n">a_sum</span>
        <span class="n">cy_val</span> <span class="o">=</span> <span class="n">cya_sum</span><span class="o">/</span><span class="n">a_sum</span>
        <span class="n">center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">cx_val</span><span class="p">,</span> <span class="n">cy_val</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">a_sum</span><span class="p">,</span> <span class="n">center</span><span class="p">]</span></div>

<div class="viewcode-block" id="Area.get_maxlength"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.get_maxlength">[docs]</a>    <span class="k">def</span> <span class="nf">get_maxlength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns max distance between points in an area.&quot;&quot;&quot;</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span>
        <span class="n">maxlen</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="c1"># loop through points checking dist to next point</span>
        <span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">p1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">pts</span><span class="p">[</span><span class="n">ind</span><span class="p">:]:</span>
                <span class="n">vect</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">-</span> <span class="n">p2</span>
                <span class="n">dist</span> <span class="o">=</span> <span class="n">vect</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">dist</span> <span class="o">&gt;</span> <span class="n">maxlen</span><span class="p">:</span>
                    <span class="n">maxlen</span> <span class="o">=</span> <span class="n">dist</span>
        <span class="k">return</span> <span class="n">maxlen</span></div>

<div class="viewcode-block" id="Area.rem_sline"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.rem_sline">[docs]</a>    <span class="k">def</span> <span class="nf">rem_sline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sline</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes a sline from this area.&quot;&quot;&quot;</span>
        <span class="n">loops</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span>
        <span class="k">for</span> <span class="n">loop</span> <span class="ow">in</span> <span class="n">loops</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sline</span> <span class="ow">in</span> <span class="n">loop</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Line </span><span class="si">%s</span><span class="s1"> removed from </span><span class="si">%s</span><span class="s1">&#39;</span>
                      <span class="o">%</span> <span class="p">(</span><span class="n">sline</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span>
                <span class="n">loop</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sline</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">sline</span><span class="o">.</span><span class="n">line</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">fea</span><span class="o">.</span><span class="n">signlines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">signlines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">fea</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>

<div class="viewcode-block" id="Area.add_sline"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.add_sline">[docs]</a>    <span class="k">def</span> <span class="nf">add_sline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signline</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds signline to the area definition.</span>

<span class="sd">        SignLine is added to the end of the lines list.</span>
<span class="sd">        Area is closed if needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># this adds a line to the area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signline</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="Area.add_hole_sline"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.add_hole_sline">[docs]</a>    <span class="k">def</span> <span class="nf">add_hole_sline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signline</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds signline to the area hole definition.</span>

<span class="sd">        Line is added to the end of the lines list.</span>
<span class="sd">        Area is closed if needed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            closed (bool): boolean telling if the hole was closed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">make_new</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">make_new</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">make_new</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">make_new</span><span class="p">:</span>
            <span class="n">hole</span> <span class="o">=</span> <span class="n">LineLoop</span><span class="p">([],</span> <span class="n">hole_bool</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">hole</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">fea</span><span class="o">.</span><span class="n">lineloops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hole</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hole</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">signline</span><span class="p">)</span>
        <span class="c1"># reverse the hole if it&#39;s closed in the cw direction</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ccw</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_area_center</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">closed</span></div>

<div class="viewcode-block" id="Area.get_patch"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.get_patch">[docs]</a>    <span class="k">def</span> <span class="nf">get_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a patch of the area.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="n">loops</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">holes</span>
            <span class="n">codes</span><span class="p">,</span> <span class="n">verts</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">loop</span> <span class="ow">in</span> <span class="n">loops</span><span class="p">:</span>
                <span class="c1"># start poly</span>
                <span class="n">codes</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Path</span><span class="o">.</span><span class="n">MOVETO</span><span class="p">]</span>
                <span class="n">verts</span> <span class="o">+=</span> <span class="p">[</span><span class="n">loop</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">axrad</span><span class="p">()]</span>
                <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="n">loop</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sline</span><span class="p">,</span> <span class="n">SignLine</span><span class="p">):</span>
                        <span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sline</span><span class="o">.</span><span class="n">pt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">axrad</span><span class="p">())</span>
                        <span class="n">codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sline</span><span class="p">,</span> <span class="n">SignArc</span><span class="p">):</span>
                        <span class="n">lverts</span><span class="p">,</span> <span class="n">lcodes</span> <span class="o">=</span> <span class="n">sline</span><span class="o">.</span><span class="n">get_verts_codes</span><span class="p">()</span>
                        <span class="n">verts</span> <span class="o">+=</span> <span class="n">lverts</span>
                        <span class="n">codes</span> <span class="o">+=</span> <span class="n">lcodes</span>
                    <span class="k">if</span> <span class="n">sline</span> <span class="o">==</span> <span class="n">loop</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="c1"># close poly if at last line</span>
                        <span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
                        <span class="n">codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">CLOSEPOLY</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">verts</span><span class="p">,</span> <span class="n">codes</span><span class="p">,</span> <span class="n">_interpolation_steps</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">patch</span></div>

<div class="viewcode-block" id="Area.label"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.label">[docs]</a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Labels the area on a Matplotlib axis</span>

<span class="sd">        Args:</span>
<span class="sd">            axis (Matplotlib Axis): Matplotlib Axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span>
                  <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Area.plot"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plots the area on a Matplotlib axis.</span>

<span class="sd">        Args:</span>
<span class="sd">            axis (Matplotlib axis): Matplotlib axis</span>
<span class="sd">            label (bool): if True, label area</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># http://stackoverflow.com/questions/8919719/how-to-plot-a-complex-polygon</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
            <span class="c1"># plot area patch</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_patch</span><span class="p">()</span>
            <span class="n">patch</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
            <span class="c1"># label ares</span>
            <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span></div>

<div class="viewcode-block" id="Area.contains_point"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.contains_point">[docs]</a>    <span class="k">def</span> <span class="nf">contains_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns bool telling if pt is inside the area.</span>

<span class="sd">        Args:</span>
<span class="sd">            pt (Point): point we are checking</span>

<span class="sd">        Returns:</span>
<span class="sd">            contains (bool): True if in this area False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_patch</span><span class="p">()</span>
        <span class="n">contains</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">axrad</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">contains</span></div>

<div class="viewcode-block" id="Area.line_insert"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.line_insert">[docs]</a>    <span class="k">def</span> <span class="nf">line_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lgiven</span><span class="p">,</span> <span class="n">lnew</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inserts line lnew before or after the given line.</span>

<span class="sd">        Args:</span>
<span class="sd">            lgiven (SignLine or SignArc): the line we are inserting relative to</span>
<span class="sd">            lnew (SignLine or SignArc): the new line we will insert</span>
<span class="sd">            after (bool): if True insert lnew after lgiven, false insert before</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if succeeded, False if failed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">lgiven</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">signlines</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Inserting line </span><span class="si">%s</span><span class="s1"> into area </span><span class="si">%s</span><span class="s1"> next to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                  <span class="p">(</span><span class="n">lnew</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">lgiven</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span>
            <span class="n">lineloop</span> <span class="o">=</span> <span class="n">lgiven</span><span class="o">.</span><span class="n">lineloop</span>
            <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;exterior lines&#39;</span>
            <span class="k">if</span> <span class="n">lineloop</span><span class="o">.</span><span class="n">hole</span><span class="p">:</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;hole lines&#39;</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">lineloop</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">lgiven</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">after</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Inserting line into </span><span class="si">%s</span><span class="s1"> outer lines&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
            <span class="n">lineloop</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">lnew</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR: Passed line was not in </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You must pass a line in this area!&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Area.set_child_ccxtypes"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.set_child_ccxtypes">[docs]</a>    <span class="k">def</span> <span class="nf">set_child_ccxtypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assigns the child element ccx types.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">etype</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="c1"># if etype is set and elements have been assigned</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
                <span class="n">element</span><span class="o">.</span><span class="n">set_ccxtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">etype</span><span class="p">)</span></div>

<div class="viewcode-block" id="Area.set_etype"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.set_etype">[docs]</a>    <span class="k">def</span> <span class="nf">set_etype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the area etype.</span>

<span class="sd">        Sets the ccxtype on elements if they have been assigned to this area.</span>

<span class="sd">        Args:</span>
<span class="sd">            etype (str): element type</span>
<span class="sd">                &#39;plstress&#39; plane stress</span>
<span class="sd">                &#39;plstrain&#39;: plane strain</span>
<span class="sd">                &#39;axisym&#39;: axisymmetric</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etype</span> <span class="o">=</span> <span class="n">etype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_child_ccxtypes</span><span class="p">()</span></div>

<div class="viewcode-block" id="Area.set_esize"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.set_esize">[docs]</a>    <span class="k">def</span> <span class="nf">set_esize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esize</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the size of mesh elements on the area when meshing.</span>

<span class="sd">        Args:</span>
<span class="sd">            esize (float): size of mesh elements on this area</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#size if set if no mesh size on points is peresent</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">set_esize</span><span class="p">(</span><span class="n">esize</span><span class="p">)</span></div>

<div class="viewcode-block" id="Area.update"><a class="viewcode-back" href="../../pycalculix.html#pycalculix.geometry.Area.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the area&#39;s external lines to the passed list.</span>

<span class="sd">        If the area is cosed, self.close() will be called.</span>

<span class="sd">        Args:</span>
<span class="sd">            line_list (list): list of SignLine and SignArc items</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">to_rem</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="n">to_rem</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sline</span> <span class="ow">in</span> <span class="n">line_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exlines</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">pycalculix</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pycalculix.html">pycalculix package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Justin Black.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>